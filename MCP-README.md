# MCP Server Setup

This directory contains scripts to manage the Supabase MCP server for Cursor integration.

## Files

- `start-mcp-server.sh`: Starts the MCP server in the background
- `stop-mcp-server.sh`: Stops the running MCP server
- `show-mcp.sh`: Shows the status of the MCP server
- `update-mcp-config.sh`: Updates the Cursor MCP configuration with values from .env.local
- `mcp.json.template`: Template for the Cursor MCP configuration with placeholders

## Environment Variables

The MCP server uses these environment variables:

- `SUPABASE_PROJECT_REF`: Your Supabase project reference ID
- `SUPABASE_DB_PASSWORD`: Your database password
- `SUPABASE_REGION`: AWS region where your Supabase project is hosted
- `SUPABASE_ACCESS_TOKEN`: Personal access token for Supabase Management API (optional)
- `SUPABASE_SERVICE_ROLE_KEY`: Service role key for Auth Admin SDK (optional)

These can be set in the `.env.local` file, which should never be committed to version control.

## Setup

1. Create a `.env.local` file with your credentials:

   ```
   SUPABASE_DB_USER=postgres.your_project_ref
   SUPABASE_DB_PASSWORD=your_password
   SUPABASE_DB_HOST=aws-0-your-region.pooler.supabase.com
   SUPABASE_DB_PORT=6543
   SUPABASE_DB_NAME=postgres
   SUPABASE_DATABASE_URL=postgres://postgres.your_project_ref:your_password@aws-0-your-region.pooler.supabase.com:6543/postgres
   ```

2. Run the start script:

   ```
   ./start-mcp-server.sh
   ```

   This will:

   - Load environment variables from `.env.local`
   - Update the Cursor MCP configuration
   - Create/activate a Python 3.12 virtual environment
   - Install dependencies if needed
   - Create a symlink to the server executable
   - Start the MCP server in the background

3. Check server status:

   ```
   ./show-mcp.sh
   ```

4. Stop the server:
   ```
   ./stop-mcp-server.sh
   ```

## Version Control

The `mcp.json.template` file can be safely committed to version control since it only contains placeholders. The actual configuration with sensitive information is generated by the `update-mcp-config.sh` script from your local `.env.local` file.

Never commit the `.env.local` file or the actual `mcp.json` with real credentials.
